<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      canvas {
        width: 100vw;
        height: 100vh;
      }
    </style>
  </head>
  <body>
    <script type="module">
      import { patch } from "../index.js";
      import { time } from "../utils.js";
      import { threeCanvas } from "../threeCanvas.js";
      import S from "https://cdn.skypack.dev/s-js";
      import * as three from "https://cdn.skypack.dev/three";

      patch(
        document.body,
        threeCanvas([
          {
            type: "Group",
            rotation: S(() => [0, 0, time() * 0.0005]),
            children: () => {
              const geometry = new three.BoxGeometry();
              return [
                {
                  type: "Mesh",
                  geometry,
                  material: new three.MeshPhongMaterial({
                    color: "orange",
                  }),
                  rotation: S(() => [time() * 0.001, time() * 0.001, 1]),
                  position: [-1, 0, 0],
                },
                {
                  type: "Mesh",
                  geometry,
                  material: new three.MeshPhongMaterial({
                    color: "pink",
                  }),
                  rotation: S(() => [time() * -0.001, time() * 0.001, 1]),
                  position: [1, 0, 0],
                },
              ];
            },
          },
          {
            type: "PointLight",
            position: [0, 0, 10],
          },
          {
            type: "AmbientLight",
            color: new three.Color("red"),
            intensity: S(() => Math.sin(time() * 0.001) * 0.5 + 0.5),
          },
        ]),
        []
      );
    </script>
  </body>
</html>
